"use strict";var _createClass=function(){function n(n,e){for(var t in e){var s=e[t];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(n,e)}return function(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}}(),_classCallCheck=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},MessageBus;!function(n){function e(n){return new t(n)}var t=function(){function n(e){var t=this;_classCallCheck(this,n),this._channels={},this._unlisten=null,this._endpoint=e;var s=function(n){return t._onEvent(n.data.name,n.data.payload)},i=function(n){return t._onEvent("error",n)};e.addEventListener("message",s),e.addEventListener("error",i),this._unlisten=function(){e.removeEventListener("message",s),e.removeEventListener("error",i)}}return _createClass(n,{close:{value:function(){null!==this._unlisten&&this._unlisten(),this._unlisten=null,this._channels={}}},on:{value:function(n,e){var t=n.toString();this._channelExists(t)||(this._channels[t]=[]),this._channels[t].push(e)}},off:{value:function(n,e){var t=n.toString();if(this._channelExists(t)){var s=this._channels[t],i=s.indexOf(e);-1!==i&&s.splice(i,1)}}},emit:{value:function(n,e){var t=n.toString();this._endpoint.postMessage({name:t,payload:e})}},_channelExists:{value:function(n){return this._channels.hasOwnProperty(n)}},_onEvent:{value:function(n,e){if(this._channelExists(n))for(var t=this._channels[n],s=t.length,i=0;s>i;i++)t[i](e)}}}),n}();n.MessageBus=t,n.create=e}(MessageBus||(MessageBus={}));
//# sourceMappingURL=MessageBus.js.map
